{% if page.header.show_header_image|default('default') == 'default' %}
  {% set show_image = parent.header.render.children.image ?? true %}
{% else %}
  {% set show_image = page.header.show_header_image == 'enabled' %}
{% endif %}
{% set header_image = page.media.images[page.header.header_image_file] ?? page.media.images|first %}

{% set show_subtitle = parent.header.render.children.subtitle ?? true %}
{% set show_cat = parent.header.render.children.category ?? true %}
{% set show_date = parent.header.render.children.date ?? false %}
{% set show_children = parent.header.render.children.nested_children ?? true %}
{% set inner_children = page.collection()|length > 0 ? page.collection() : page.children.visible %}

{# ------------------------------------------------------------------------ #}

<tr>

  {# Header image #}  
  {% if show_header_image == 'enabled' %}
  <td>
    {% if style.image_cropping|default(false) %}
      {{ page.media[header_image_file].cropZoom(style.width / 7, style.width / 7).html() }}
    {% else %}
      {{ page.media[header_image_file].html() }}
    {% endif %}
  </td>
  {% endif %}  

  {# Title #}
  <td>
    <h3>
      <a href="{{ page.url }}">{{ page.title }}</a>
      {% if page.header.subtitle %} - <small>{{ page.header.subtitle }}</small>{% endif %}
    </h3>
  </td>

  {# Categories #}
  <td><small>{% for category in page.taxonomy.category %}[<a href="{{ page.parent.url|rtrim('/') }}/category{{ config.system.param_sep }}{{ category }}">{{ category }}</a>]{% if not loop.last %}, {% endif %}{% endfor %}</small></td>

  {# Last Edited #}
  <td></td>
</tr>

{# Children #}
{% set inner_children = page.collection()|length > 0 ? page.collection() : page.children.visible %}

{% if show_nested_children and inner_children|length > 0 %}
{% set inner_children = inner_children.order(page.header.content.order.by|default('date'), page.content.order.dir|default('desc')) %}
<tr>Child Pages</tr>
{% for child in inner_children %}
<tr>
  <td colspan="3"><a href="{{ child.url }}">{{ child.title }}</a>{{ child.header.subtitle ? ' - <span>'~child.header.subtitle~'</span>' : '' }}</td>
</tr>
{% endfor %}

{% endif %} {# End render nested children #}