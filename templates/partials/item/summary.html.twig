{% include 'partials/item/components/child_variables.html.twig' %}

{# ------------------------------------------------------------------------ #}

<hr/>
{% if html5 %}
  <section class="snippet{% if page.taxonomy.category %}{% for cat in page.taxonomy.category %} cat_{{ cat|hyphenize }}{% endfor %}{% endif %}">
{% else %}
  <div class="snippet{% if page.taxonomy.category %}{% for cat in page.taxonomy.category %} cat_{{ cat|hyphenize }}{% endfor %}{% endif %}">
{% endif %}

{# Title & Subtitle #}
<h3>
  <a href="{{ page.url }}">{{ page.title }}</a>
  {% if page.header.subtitle and show_subtitle %} - <small>{{ page.header.subtitle }}</small>{% endif %}
</h3>

<p> {# The next set of items should be somewhat close together.}

{# Header Image #}
{% if show_image and header_image_file %}
  <a href="{{ page.url }}">
  {% if style.image_cropping|default(false) %}
    {{ page.media[header_image_file].cropZoom(style.width - 10, style.width / 5).html() }}
  {% else %}
    {{ page.media[header_image_file].html() }}
  {% endif %}
  </a>
{% endif %}

{# Date #}
{% if show_date %}
<sub>
  {% if html5 %}
    <time datetime="{{ page.date|date("c") }}">{{ page.date|date(system.pages.dateformat.short) }}</time>
  {% else %}
    <span class="datetime">{{ page.date|date(system.pages.dateformat.short) }}</span>
  {% endif %}
</sub>
{% endif %}

{# Categories #}
{% if page.taxonomy.category and show_cat %}
  {{ show_date ? '<br/>' : '' }} {# Need a line break only if the date was shown #}

  Categories: <small>
  {% for category in page.taxonomy.category %}
    {{ structure.use_decorators ? '[' : '' }}<a href="{{ page.parent.url|rtrim('/') }}/category{{ config.system.param_sep }}{{ category }}">{{ category }}</a>{{ structure.use_decorators ? ']' : '' }}{{ not loop.last ? ',' : '' }}
  {% endfor %}</small></p>
{% else %}
{% endif %}

</p>

{# Text #}
{% if page.summary != page.content %}
  {{ page.summary|raw }}
{% else %}
  {{ page.content|raw }}
{% endif %}

{# Children #}
{% if show_children and inner_children|length > 0 %}
{% set inner_children = inner_children.order(page.header.content.order.by|default('date'), page.content.order.dir|default('desc')) %}
<p>Sub-Pages:
<ol class="nested-children">
  {% for child in inner_children %}
  <li><a href="{{ child.url }}">{{ child.title }}</a>{{ child.header.subtitle and show_subtitle ? ' - <span>'~child.header.subtitle~'</span>' : '' }}</li>
  {% endfor %}
</ol>
</p>
{% endif %} {# End render nested children #}

{{ html5 ? '</section>' : '</div>' }}